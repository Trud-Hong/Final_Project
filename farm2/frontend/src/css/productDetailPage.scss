/* src/css/productDetailPage.scss */

/* 색상 */
$primary: #28a745;
$muted: #6b7280;
$border: #e5e7eb;
$bg: #fff;
$page-max: 1200px;

.pd-page-wrapper {
  background: #f6f7f8;
  min-height: 100vh;
  padding: 40px 16px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans KR", "Helvetica Neue", Arial;
  color: #111827;
}

.pd-container {
  max-width: $page-max;
  margin: 0 auto;
}

/* top layout */
.pd-top {
  display: flex;
  gap: 28px;
  align-items: flex-start;
  margin-bottom: 32px;
}

/* LEFT */
.pd-left {
  flex: 2;
  min-width: 0;
  max-width: calc(100% - 340px);

  .pd-main-image {
    position: relative;

    .pd-img-prev,
    .pd-img-next {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0,0,0,0.3);
      border: none;
      color: #fff;
      font-size: 28px;
      width: 40px;
      height: 60px;
      cursor: pointer;
      
      z-index: 5;
    }
    .pd-img-prev { left: 8px; }
    .pd-img-next { right: 8px; }

    img {
      width: 100%;
      height: 520px;
      object-fit: contain;
      background: #f6f7f8;
      display: block;
      transition: opacity 100ms ease, transform 300ms ease;
      cursor: zoom-in;
    }

    &.fading img {
      opacity: 0;
      transform: scale(0.995);
    }
    &.visible img {
      opacity: 1;
      transform: scale(1);
    }
  }

  .pd-thumb-row {
    display: flex;
    gap: 10px;
    margin-top: 12px;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 8px;
    scroll-behavior: smooth;
    width: 100%; // 대표 이미지 가로 길이만큼
    
    // 스크롤바 스타일링 (Webkit 브라우저)
    &::-webkit-scrollbar {
      height: 6px;
    }
    
    &::-webkit-scrollbar-track {
      background: #f1f1f1;
      
    }
    
    &::-webkit-scrollbar-thumb {
      background: #888;
      
      
      &:hover {
        background: #555;
      }
    }
    
    // Firefox 스크롤바
    scrollbar-width: thin;
    scrollbar-color: #888 #f1f1f1;

    .pd-thumb {
      width: 84px;
      height: 84px;
      min-width: 84px;
      flex-shrink: 0;
      
      overflow: hidden;
      border: 1px solid $border;
      padding: 0;
      background: #fff;
      cursor: pointer;
      transition: transform 0.12s ease, border-color 0.12s ease;

      img { width: 100%; height: 100%; object-fit: cover; display:block; }

      &:hover { transform: translateY(-4px); }
      &.active {
        border-color: $primary;
        box-shadow: 0 6px 18px rgba(40,167,69,0.08);
      }
    }
  }

  .pd-short-desc {
    margin-top: 20px;
    background: #fff;
    padding: 20px;
    
    border: 1px solid $border;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);

    h3 { 
      margin: 0 0 12px; 
      font-size: 18px; 
      font-weight: 700;
      color: #111827;
    }
    
    p { 
      margin: 0 0 12px; 
      color: #374151; 
      line-height: 1.7; 
      font-size: 14px;
    }
    
    .pd-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 12px;
      
      .pd-tag {
        display: inline-block;
        padding: 6px 12px;
        background: #f0fdf4;
        color: $primary;
        
        font-size: 12px;
        font-weight: 600;
        border: 1px solid #bbf7d0;
      }
    }
  }
}

/* RIGHT sticky */
.pd-right {
  flex: 1;
  position: relative;

  .pd-sticky {
    position: sticky;
    top: 96px;
    background: $bg;
    
    padding: 24px;
    border: 1px solid $border;
    box-shadow: 0 4px 16px rgba(15,23,42,0.06);
    text-align: left;

    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .pd-title { 
    font-size: 22px; 
    font-weight: 700; 
    color: #111827;
    line-height: 1.5;
    margin-bottom: 0;
    padding-bottom: 16px;
    border-bottom: 1px solid #e5e7eb;
  }

  .pd-price-row { 
    display: flex; 
    align-items: baseline; 
    gap: 12px;
    flex-wrap: wrap;
    padding-bottom: 16px;
    border-bottom: 1px solid #f3f4f6;
    
    .pd-price {
      font-size: 28px;
      font-weight: 800;
      color: $primary;
      line-height: 1.2;
    }
    
    .pd-price-old {
      color: $muted;
      text-decoration: line-through;
      font-size: 18px;
      margin-left: 8px;
    }
    
    .pd-discount { 
      color: #ef4444; 
      font-weight: 700; 
      font-size: 15px; 
      padding: 4px 10px; 
      ; 
      background: #fff5f5;
      border: 1px solid #fecaca;
    }
    
    .pd-discount-period {
      width: 100%;
      font-size: 12px;
      color: $muted;
      margin-top: 8px;
      padding: 6px 8px;
      background: #f9fafb;
      ;
    }
  }

  .pd-seller { 
    padding: 12px 16px;
    background: #f9fafb;
    
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 14px;
    
    .label { 
      color: $muted; 
      font-weight: 600;
      min-width: 70px;
      font-size: 13px;
    }
    
    .seller-name {
      color: #111827;
      font-weight: 600;
    }
  }

  .pd-info { 
    font-size: 14px; 
    color: $muted;
    padding: 16px;
    background: #f9fafb;
    
    border: 1px solid #e5e7eb;
    
    div { 
      margin: 8px 0; 
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 6px 0;
      
      &:first-child {
        margin-top: 0;
      }
      
      &:last-child {
        margin-bottom: 0;
      }
      
      span { 
        display: inline-block; 
        min-width: 80px; 
        color: #6b7280;
        font-weight: 600;
        font-size: 13px;
        flex-shrink: 0;
      }
      
      &:not(.pd-stock-info) {
        color: #374151;
        font-size: 14px;
        line-height: 1.5;
      }
    }
    
    .pd-stock-info {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      background: #fff;
      
      border: 2px solid #e5e7eb;
      margin-top: 12px;
      flex-wrap: wrap;
      
      span:first-child {
        min-width: 90px;
        color: #6b7280;
        font-weight: 600;
        font-size: 13px;
      }
      
      .stock-normal {
        color: $primary;
        font-weight: 700;
        font-size: 16px;
        padding: 4px 12px;
        background: #f0fdf4;
        ;
      }
      
      .stock-low {
        color: #f59e0b;
        font-weight: 700;
        font-size: 16px;
        padding: 4px 12px;
        background: #fffbeb;
        ;
      }
      
      .stock-warning {
        background: #fef3c7;
        color: #d97706;
        padding: 6px 10px;
        ;
        font-size: 12px;
        font-weight: 700;
        margin-left: auto;
        border: 1px solid #fcd34d;
      }
      
      .stock-out {
        background: #fee2e2;
        color: #dc2626;
        padding: 6px 10px;
        ;
        font-size: 12px;
        font-weight: 700;
        margin-left: auto;
        border: 1px solid #fca5a5;
      }
    }
  }

  .pd-option {
    label { 
      display: block; 
      font-weight: 700; 
      margin-bottom: 8px; 
      font-size: 14px;
      color: #111827;
    }
    select { 
      width: 100%; 
      padding: 12px; 
      border: 1px solid $border; 
      
      font-size: 14px;
      background: #fff;
      cursor: pointer;
      transition: border-color 0.2s ease;
      
      &:focus {
        outline: none;
        border-color: $primary;
      }
    }
  }

  .pd-quantity { 
    display: flex; 
    flex-direction: column;
    gap: 8px;
    
    > span {
      font-weight: 600;
      color: #111827;
      font-size: 14px;
    }
    
    > div:first-of-type {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .pd-counter { 
      display: flex; 
      gap: 8px; 
      align-items: center;
      border: 1px solid $border;
      
      padding: 4px;
      background: #fff;
      
      button { 
        width: 32px; 
        height: 32px; 
        ; 
        border: none; 
        background: #f3f4f6; 
        cursor: pointer;
        font-weight: 700;
        font-size: 16px;
        color: #111827;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        
        &:hover:not(:disabled) {
          background: $primary;
          color: #fff;
        }
        
        &:disabled {
          opacity: 0.4;
          cursor: not-allowed;
        }
      }
      
      input {
        width: 50px;           
        height: 32px;
        text-align: center;
        border: none;
        background: transparent;
        font-weight: 700;
        font-size: 15px;
        color: #111827;
        -moz-appearance: textfield;
        &::-webkit-inner-spin-button,
        &::-webkit-outer-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
        
        &:focus {
          outline: none;
        }
      }
    }
    
    .quantity-warning {
      font-size: 12px;
      color: #ef4444;
      font-weight: 600;
      text-align: right;
      padding-top: 4px;
    }
  }

  .pd-total { 
    padding: 16px;
    background: #f9fafb;
    
    border: 1px solid #e5e7eb;
    
    .pd-total-message {
      text-align: center;
      padding: 20px;
      color: #666;
      font-size: 14px;
    }
    
    .pd-total-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      
      &:last-child {
        margin-bottom: 0;
      }
      
      span {
        font-weight: 600;
        color: #374151;
        font-size: 14px;
      }
      
      strong { 
        color: $primary; 
        font-size: 22px; 
        font-weight: 800; 
      }
    }
    
    .pd-total-detail {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      font-size: 14px;
      color: #6b7280;
      
      &:last-of-type {
        margin-bottom: 0;
      }
      
      span:first-child {
        font-weight: 500;
        color: #374151;
      }
      
      span:last-child {
        font-weight: 600;
      }
      
      &.shipping-free {
        color: #28a745;
        
        span {
          font-weight: 600;
          color: #28a745;
        }
      }
      
      &.bulk-discount {
        color: #28a745;
        font-size: 13px;
        
        span {
          color: #28a745;
          font-weight: 600;
        }
      }
    }
    
    .pd-total-final {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 16px;
      padding-top: 16px;
      border-top: 2px solid #e5e7eb;
      
      span {
        font-weight: 700;
        color: #111827;
        font-size: 16px;
      }
      
      strong {
        color: $primary;
        font-size: 24px;
        font-weight: 800;
      }
    }
    
    // 기존 스타일 유지 (단일 행 레이아웃용)
    > span {
      font-weight: 600;
      color: #374151;
      font-size: 15px;
    }
    
    > strong { 
      color: $primary; 
      font-size: 22px; 
      font-weight: 800; 
    }
  }

  .pd-buttons { 
    display: flex; 
    gap: 12px; 
    flex-direction: column;
    margin-top: 4px;
    
    .btn-buy { 
      padding: 16px; 
      background: $primary; 
      color: #fff; 
       
      border: none; 
      font-weight: 700; 
      font-size: 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      
      &:hover:not(:disabled) {
        background: #218838;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
      }
      
      &:disabled {
        background: #9ca3af;
        cursor: not-allowed;
        opacity: 0.6;
      }
    }
    
    .btn-cart { 
      padding: 14px; 
      background: #fff; 
      border: 2px solid $border; 
       
      cursor: pointer;
      font-weight: 600;
      font-size: 15px;
      color: #374151;
      transition: all 0.2s ease;
      
      &:hover:not(:disabled) {
        border-color: $primary;
        color: $primary;
        background: #f0fdf4;
      }
      
      &:disabled {
        cursor: not-allowed;
        opacity: 0.5;
      }
    }
  }

  .pd-delivery-summary { 
    padding: 12px 16px;
    background: #f0fdf4;
    
    border: 1px solid #bbf7d0;
    
    .badge { 
      background: $primary; 
      color: #fff; 
      padding: 4px 10px; 
      ; 
      font-weight: 700; 
      font-size: 11px;
      display: inline-block;
      margin-bottom: 8px;
    }
    
    div { 
      color: #065f46; 
      font-size: 13px;
      line-height: 1.6;
    }
  }
}

/* mid sections */
.pd-mid {
  margin-top: 0;
  
  section {
    background: #fff;
    border: 1px solid $border;
    padding: 24px;
    
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    margin-bottom: 20px;

    h4 {
      font-size: 18px;
      font-weight: 700;
      margin: 0 0 16px 0;
      color: #111827;
      border-bottom: 2px solid #e5e7eb;
      padding-bottom: 12px;
      position: relative;
      
      &::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 60px;
        height: 2px;
        background: $primary;
      }
    }

    .pd-delivery-item,
    .pd-checkpoint {
      margin-bottom: 10px;
      color: #374151;
      line-height: 1.7;
      padding-left: 0;
      font-size: 14px;
      
      strong {
        color: #111827;
        font-weight: 600;
      }
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 8px;
      
      td, th { 
        padding: 12px 8px; 
        color: #374151;
        font-size: 14px;
      }
      
      th { 
        font-weight: 700; 
        color: #111827;
        background: #f9fafb;
        border-bottom: 2px solid #e5e7eb;
        width: 140px;
      }
      
      tr {
        border-bottom: 1px solid #f3f4f6;
        
        &:last-child {
          border-bottom: none;
        }
      }
      
      tr:nth-child(even) { 
        background: #fafbfc; 
      }
    }
  }
}

/* reviews */
.pd-reviews { 
  margin-top: 28px; 
  background: #fff; 
  border: 1px solid $border; 
  padding: 24px; 
  
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  
  .pd-section-head { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    margin-bottom: 20px;
    padding-bottom: 12px;
    border-bottom: 2px solid #e5e7eb;
    
    h4 {
      margin: 0;
      font-size: 20px;
      font-weight: 700;
      color: #111827;
    }

    .pd-review-controls {
      display: flex;
      align-items: center;
    }

    .custom-select {
      position: relative;
      padding: 10px 40px 10px 14px;
      border: 2px solid #e5e7eb;
      background: #fff;
      font-size: 14px;
      font-weight: 500;
      color: #374151;
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 14px center;
      background-size: 12px;
      transition: all 0.2s ease;
      min-width: 140px;

      &:hover {
        border-color: $primary;
        background-color: #f9fafb;
      }

      &:focus {
        outline: none;
        border-color: $primary;
        box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.15);
        background-color: #fff;
      }

      option {
        padding: 10px;
        background: #fff;
        color: #374151;
        font-weight: 500;
      }
    }
  }
  
  .pd-review-write { 
    display: flex; 
    flex-direction: column; 
    gap: 12px; 
    margin-bottom: 24px;
    padding: 16px;
    background: #f9fafb;
    
    border: 1px solid #e5e7eb;
    
    input { 
      padding: 12px; 
       
      border: 1px solid $border; 
      width: 100%;
      font-size: 14px;
      background: #fff;
    }
    
    textarea {
      padding: 12px;
      
      border: 1px solid $border;
      width: 100%;
      min-height: 100px;
      resize: vertical;
      font-size: 14px;
      font-family: inherit;
    }
    
    .pd-review-rating {
      display: flex;
      align-items: center;
      gap: 8px;
      
      label {
        font-weight: 600;
        color: #374151;
        font-size: 14px;
      }
      
      span {
        cursor: pointer;
        font-size: 24px;
        transition: transform 0.2s;
        
        &:hover {
          transform: scale(1.2);
        }
      }
    }
    
    .pd-review-tools { 
      display: flex; 
      gap: 12px; 
      align-items: flex-start; 
      flex-wrap: wrap;
      
      .pd-file-label { 
        padding: 10px 16px; 
        border: 2px dashed $border; 
         
        cursor: pointer; 
        background: #fff;
        font-size: 14px;
        font-weight: 600;
        color: #6b7280;
        transition: all 0.2s;
        
        &:hover {
          border-color: $primary;
          color: $primary;
          background: #f0fdf4;
        }
        
        input { display: none; }
      }
      
      .pd-upload-preview { 
        display: flex; 
        gap: 10px; 
        flex-wrap: wrap;
        
        .pd-upload-thumb { 
          position: relative; 
          width: 80px; 
          height: 80px;
          
          overflow: visible; // X 버튼이 잘리지 않도록 변경
          border: 2px solid #e5e7eb;
          
          img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            
          }
          
          .btn-remove-preview {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #ef4444;
            color: #fff;
            border: none;
            ;
            width: 28px;
            height: 28px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            z-index: 10; // 다른 요소 위에 표시되도록
            
            &:hover {
              background: #dc2626;
            }
          }
        }
      }
      
      .pd-review-actions { 
        margin-left: auto; 
        
        button { 
          padding: 12px 24px; 
          background: $primary; 
          color: #fff; 
          border: none; 
           
          cursor: pointer;
          font-weight: 600;
          font-size: 14px;
          transition: all 0.2s;
          
          &:hover {
            background: #218838;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
          }
        }
      }
    }
  }
  
  .pd-review-list { 
    display: flex; 
    flex-direction: column; 
    gap: 16px;
  }
  
  .pd-review-item { 
    padding: 20px; 
     
    background: #fafafa;
    border: 1px solid #e5e7eb;
    transition: all 0.2s;
    
    &:hover {
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      border-color: #d1d5db;
    }
    
    .pd-review-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 12px;
    }
    
    .pd-review-meta {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
      
      .pd-review-author {
        font-size: 16px;
        font-weight: 700;
        color: #111827;
      }
      
      .pd-review-rating-stars {
        display: flex;
        gap: 2px;
        
        span {
          font-size: 18px;
          
          &.star-filled {
            color: #fbbf24;
          }
          
          &.star-empty {
            color: #e5e7eb;
          }
        }
      }
      
      .pd-review-date {
        font-size: 13px;
        color: #6b7280;
      }
    }
    
    .pd-review-actions-buttons {
      display: flex;
      gap: 8px;
      
      button {
        padding: 6px 12px;
        border: 1px solid #e5e7eb;
        ;
        background: #fff;
        cursor: pointer;
        font-size: 13px;
        font-weight: 600;
        transition: all 0.2s;
        
        &.btn-edit {
          color: #2563eb;
          border-color: #2563eb;
          
          &:hover {
            background: #eff6ff;
          }
        }
        
        &.btn-delete {
          color: #ef4444;
          border-color: #ef4444;
          
          &:hover {
            background: #fef2f2;
          }
        }
      }
    }
    
    .pd-review-content {
      font-size: 15px;
      line-height: 1.7;
      color: #374151;
      margin-bottom: 12px;
      white-space: pre-wrap;
      word-break: break-word;
      text-align: left; // 왼쪽 정렬
    }
    
    .pd-review-pics {
      margin-top: 12px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      
      .pd-review-pic-item {
        width: 100px;
        height: 100px;
        
        overflow: hidden;
        cursor: zoom-in;
        border: 2px solid #e5e7eb;
        transition: all 0.2s;
        
        &:hover {
          border-color: $primary;
          transform: scale(1.05);
        }
        
        img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }
      }
    }
    
    .pd-review-edit-form {
      margin-top: 16px;
      padding: 16px;
      background: #fff;
      
      border: 2px solid $primary;
      
      .pd-review-rating-edit {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 12px;
        
        label {
          font-weight: 600;
          color: #374151;
          font-size: 14px;
        }
        
        .star-edit {
          cursor: pointer;
          font-size: 24px;
          transition: transform 0.2s;
          
          &:hover {
            transform: scale(1.2);
          }
          
          &.star-filled {
            color: #fbbf24;
          }
          
          &.star-empty {
            color: #e5e7eb;
          }
        }
      }
      
      .pd-review-content-edit {
        width: 100%;
        min-height: 120px;
        padding: 12px;
        
        border: 1px solid $border;
        font-size: 14px;
        font-family: inherit;
        resize: vertical;
        margin-bottom: 12px;
      }
      
      .pd-review-images-edit {
        margin-bottom: 12px;
        
        .pd-file-label {
          padding: 8px 14px;
          border: 2px dashed $border;
          
          cursor: pointer;
          background: #f9fafb;
          font-size: 13px;
          font-weight: 600;
          color: #6b7280;
          display: inline-block;
          margin-bottom: 10px;
          transition: all 0.2s;
          
          &:hover {
            border-color: $primary;
            color: $primary;
            background: #f0fdf4;
          }
        }
        
        .pd-review-pic-preview {
          position: relative;
          display: inline-block;
          width: 80px;
          height: 80px;
          margin-right: 10px;
          margin-bottom: 10px;
          
          overflow: visible; // X 버튼이 잘리지 않도록 변경
          border: 2px solid #e5e7eb;
          
          img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            
          }
          
          .btn-remove-pic {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #ef4444;
            color: #fff;
            border: none;
            ;
            width: 28px;
            height: 28px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            z-index: 10; // 다른 요소 위에 표시되도록
            
            &:hover {
              background: #dc2626;
            }
          }
        }
      }
      
      .pd-review-edit-actions {
        display: flex;
        gap: 8px;
        justify-content: flex-end;
        
        button {
          padding: 10px 20px;
          border: none;
          
          cursor: pointer;
          font-weight: 600;
          font-size: 14px;
          transition: all 0.2s;
          
          &.btn-save {
            background: $primary;
            color: #fff;
            
            &:hover {
              background: #218838;
              transform: translateY(-1px);
              box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
            }
          }
          
          &.btn-cancel {
            background: #6b7280;
            color: #fff;
            
            &:hover {
              background: #4b5563;
            }
          }
        }
      }
    }
  }
  
  .pd-review-empty {
    text-align: center;
    padding: 40px 20px;
    color: #9ca3af;
    font-size: 15px;
  }

  .pd-qna-empty {
    padding: 40px 20px;
    text-align: center;
    color: #9ca3af;
    border-top: 2px solid #f3f4f6;
    font-size: 15px;
  }

  .pd-qna-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;

    thead tr {
      border-bottom: 2px solid #e5e7eb;
      background: #f9fafb;

      th {
        padding: 14px 16px;
        font-size: 13px;
        font-weight: 600;
        color: #6b7280;
        text-transform: uppercase;
        letter-spacing: 0.02em;

        &.col-number { width: 70px; text-align: center; }
        &.col-author,
        &.col-date,
        &.col-answer { width: 130px; text-align: center; }
      }
    }

    tbody tr {
      border-bottom: 1px solid #e5e7eb;
      transition: background 0.2s, box-shadow 0.2s;

      &:hover {
        background: #f8fafc;
        box-shadow: inset 0 0 0 9999px rgba(15, 23, 42, 0.02);
      }

      &:last-child {
        border-bottom: none;
      }

      td {
        padding: 18px 16px;
        font-size: 14px;
        vertical-align: middle;
        color: #111827;

        &.col-number,
        &.col-author,
        &.col-date,
        &.col-answer {
          text-align: center;
          color: #6b7280;
          font-weight: 500;
        }
      }
    }
  }

  .pd-qna-row {
    transition: background 0.2s ease;
  }

  .pd-qna-alert {
    margin-bottom: 20px;
    padding: 12px 16px;
    
    background: #eef2ff;
    border: 1px solid #c7d2fe;
    color: #3730a3;
    font-size: 14px;
  }

  .pd-qna-title {
    display: flex;
    align-items: center;
    gap: 8px;

    .text {
      font-weight: 600;
      color: #1f2937;
      line-height: 1.5;
      word-break: break-word;
    }

    .q-private-badge {
      display: inline-flex;
      align-items: center;
      padding: 2px 8px;
      background: #fee2e2;
      color: #991b1b;
      ;
      font-size: 11px;
      font-weight: 600;
    }
  }

  .pd-qna-actions {
    display: flex;
    flex-direction: column;
    gap: 6px;
    align-items: center;

    .status-complete {
      color: $primary;
      font-size: 13px;
      font-weight: 600;
    }

    .status-pending {
      color: #9ca3af;
      font-size: 13px;
    }

    .btn-answer,
    .btn-edit,
    .btn-delete {
      padding: 6px 12px;
      ;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      border: none;
      transition: all 0.2s;
    }

    .btn-answer {
      background: $primary;
      color: #fff;

      &:hover {
        background: #218838;
      }
    }

    .btn-edit {
      background: #eff6ff;
      color: #2563eb;

      &:hover {
        background: #dbeafe;
      }
    }

    .btn-delete {
      background: #fee2e2;
      color: #dc2626;

      &:hover {
        background: #fecaca;
      }
    }

    .action-buttons {
      display: flex;
      gap: 4px;
    }
  }

  .title-button {
    border: none;
    background: transparent;
    padding: 0;
    margin: 0;
    font-weight: 600;
    font-size: 15px;
    color: #1f2937;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    transition: color 0.2s ease;

    &:hover {
      color: $primary;
    }

    &::after {
      content: "⌄";
      font-size: 12px;
      color: #9ca3af;
      transition: transform 0.2s ease;
    }

    &.expanded::after {
      transform: rotate(180deg);
    }
  }

.pd-qna-detail-row {
  td {
    padding: 0 16px 16px 16px;
    background: #f9fafb;
  }
}

  .pd-qna-detail-body {
    padding: 16px;
    border: 1px solid #e5e7eb;
    
    background: #fff;
    margin-top: 8px;

    .detail-label {
      font-size: 13px;
      font-weight: 600;
      color: #6b7280;
      margin-bottom: 6px;
    }

    .detail-question,
    .detail-answer {
      margin-bottom: 16px;

      p {
        margin: 0;
        color: #1f2937;
        line-height: 1.6;
        white-space: pre-wrap;
      }

      &.empty {
        color: #9ca3af;
      }
    }

    .detail-locked {
      padding: 16px;
      ;
      background: #fff7ed;
      color: #b45309;
      font-size: 14px;
      line-height: 1.6;
    }
  }
}

/* related */
.pd-related { margin-top:18px;
  .pd-related-row { display:flex; gap:12px; overflow-x:auto; padding:10px 4px; }
  .pd-related-card { min-width:160px; background:#fff; border:1px solid $border; ; padding:10px; flex-shrink:0; cursor:pointer;
    img { width:100%; height:120px; object-fit:cover; ; }
    .r-info { margin-top:8px; .r-name { font-size:13px; } .r-price { font-weight:700; color:$primary; margin-top:6px; } }
  }
}

/* certificates */
.pd-certificates {
  margin-top: 32px;
  background: #fff;
  border: 1px solid $border;
  
  padding: 32px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  
  h4 {
    font-size: 20px;
    font-weight: 700;
    margin: 0 0 24px 0;
    color: #111827;
    padding-bottom: 12px;
    border-bottom: 2px solid #e5e7eb;
    position: relative;
    
    &::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 80px;
      height: 2px;
      background: $primary;
    }
  }
  
  .pd-cert-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 20px;
    
    .pd-cert-item {
      
      overflow: hidden;
      background: #fafafa;
      border: 1px solid #e5e7eb;
      transition: all 0.3s ease;
      cursor: pointer;
      
      &:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 24px rgba(0,0,0,0.12);
        border-color: $primary;
      }
      
      img {
        width: 100%;
        height: 250px;
        object-fit: cover;
        display: block;
      }
      
      .pd-cert-pdf {
        padding: 40px 20px;
        text-align: center;
        background: #f9fafb;
        
        a {
          display: inline-block;
          padding: 12px 20px;
          background: $primary;
          color: #fff;
          
          text-decoration: none;
          font-weight: 600;
          font-size: 14px;
          transition: all 0.2s ease;
          
          &:hover {
            background: #218838;
            transform: translateY(-2px);
          }
        }
      }
    }
  }
}

/* detail images */
.pd-detail-images { 
  margin-top: 32px;
  background: #fff;
  border: 1px solid $border;
  
  padding: 32px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  
  h4 {
    font-size: 20px;
    font-weight: 700;
    margin: 0 0 24px 0;
    color: #111827;
    padding-bottom: 12px;
    border-bottom: 2px solid #e5e7eb;
    position: relative;
    
    &::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 80px;
      height: 2px;
      background: $primary;
    }
  }
  
  .pd-detail-img-container {
    display: flex;
    flex-direction: column;
    gap: 24px;
    
    .pd-detail-img-item {
      width: 100%;
      
      overflow: hidden;
      background: #fafafa;
      cursor: zoom-in;
      transition: all 0.3s ease;
      border: 1px solid #e5e7eb;
      position: relative;
      
      &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0);
        transition: background 0.3s ease;
        z-index: 1;
        pointer-events: none;
      }
      
      &:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 32px rgba(0,0,0,0.12);
        border-color: $primary;
        
        &::before {
          background: rgba(0,0,0,0.02);
        }
      }
      
      img {
        width: 100%;
        height: auto;
        display: block;
        object-fit: contain;
        background: #fff;
        transition: transform 0.3s ease;
      }
      
      &:hover img {
        transform: scale(1.01);
      }
    }
  }
}

/* lightbox */
.pd-lightbox { position:fixed; inset:0; background: rgba(0,0,0,0.6); display:flex; align-items:center; justify-content:center; z-index:9999;
  .pd-lightbox-inner { position:relative; max-width:90%; max-height:90%;
    img { width:100%; height:auto; display:block; ; }
    .pd-lightbox-close { position:absolute; right:-12px; top:-12px; background:#fff; ; border:none; width:36px; height:36px; cursor:pointer; font-size:18px; }
  }
}

/* responsive */
@media (max-width: 980px) {
  .pd-top { flex-direction: column; }
  .pd-mid { grid-template-columns: 1fr; }
  .pd-right .pd-sticky { position: static; top: auto; text-align: left; }
  .pd-left .pd-main-image img { height: 360px; }
  .pd-detail-images .pd-detail-img-grid { grid-template-columns: 1fr; }
}

/* small phones */
@media (max-width: 520px) {
  .pd-page-wrapper { padding: 16px 10px; }
  .pd-left .pd-main-image img { height: 260px; }
  .pd-thumb-row .pd-thumb { width: 64px; height: 64px; }
  .pd-right { order: 2; } /* 구매박스 아래로 */
}
/* .pd-tab-nav 추가 */
.pd-tab-nav {
  position: sticky;
  top: 80px;
  background: #fff;
  display: flex;
  gap: 20px;
  padding: 12px 0;
  border-bottom: 1px solid #e5e7eb;
  z-index: 50;

  button {
    background: none;
    border: none;
    font-weight: 600;
    font-size: 14px;
    color: #6b7280;
    cursor: pointer;
    padding: 6px 12px;
    ;
    transition: all 0.2s;

    &.active {
      color: #28a745;
      background: #f0fdf4;
    }

    &:hover:not(.active) { color: #28a745; }
  }
}

/* .pd-mid 세로 배치 */
.pd-mid { 
  display: block; 
  gap: 18px; 
  margin-top: 32px;
}

/* 탭 스타일 */
.pd-tabs {
  margin-bottom: 24px;
  background: #fff;
  border-bottom: 2px solid #e5e7eb;
  
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  
  &.pd-tabs-static {
    position: static;
    margin-left: 0;
    margin-right: 0;
  }
  
  .pd-tabs-inner {
    max-width: $page-max;
    margin: 0 auto;
    display: flex;
    gap: 0;
    padding: 0;
    justify-content: center;
  }
  
  .pd-tab {
    background: none;
    border: none;
    font-weight: 600;
    font-size: 16px;
    color: #6b7280;
    cursor: pointer;
    padding: 16px 32px;
    
    transition: all 0.2s ease;
    position: relative;
    border-bottom: 3px solid transparent;
    margin-bottom: -2px;
    
    &:hover:not(.active) {
      color: $primary;
      background: #f9fafb;
    }
    
    &.active {
      color: $primary;
      border-bottom-color: $primary;
      background: #fff;
    }
  }
}

/* 하단 고정 탭 스타일 */
.pd-tabs-bottom {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 100;
  background: #fff;
  border-top: 2px solid #e5e7eb;
  border-bottom: none;
  box-shadow: 0 -2px 8px rgba(0,0,0,0.04);
  animation: slideUp 0.3s ease;
  
  .pd-tabs-bottom-inner {
    max-width: $page-max;
    margin: 0 auto;
    display: flex;
    gap: 0;
    justify-content: center;
    padding: 0;
  }
  
  .pd-tab-bottom {
    background: none;
    border: none;
    font-weight: 600;
    font-size: 16px;
    color: #6b7280;
    cursor: pointer;
    padding: 16px 32px;
    
    transition: all 0.2s ease;
    position: relative;
    border-top: 3px solid transparent;
    margin-top: -2px;
    
    &:hover:not(.active) {
      color: $primary;
      background: #f9fafb;
    }
    
    &.active {
      color: $primary;
      border-top-color: $primary;
      background: #fff;
    }
  }
}

@keyframes slideUp {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.pd-tab-content {
  background: #fff;
  
  padding: 32px;
  min-height: 200px;
  margin-bottom: 24px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  
  .pd-detail-images {
    .pd-detail-img-container {
      display: flex;
      flex-direction: column;
      gap: 24px;
    }
  }
}

